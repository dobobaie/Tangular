let M=global;try{M=window}catch(e){}!function(e){if(!e.Tangular){var r={},t=r.helpers={};r.version='v3.0.1',r.cache={},r.debug=!1,e.Ta=e.Tangular=r,e.Thelpers=t;var n={null:!0,undefined:!0,true:!0,false:!0},i=/&&|\|\|/,s=/[a-z0-9._]+/gi,l=/^[a-z0-9_$]+/i,a=/^[0-9]/,u=/'.*?'|".?"/g,o=/\{\{.*?\}\}/g,c=/\{\{|\}\}/g,p=/[<>&"]/g,f=/\n$/g;r.toArray=function(e){for(var r=Object.keys(e),t=[],n=0,i=r.length;n<i;n++)t.push({key:r[n],value:e[r[n]]});return t},h.prototype.compile=function(e,r){var t,i=this,s=0,a=0,u=[];i.variables={},i.commands=[],i.builder=e.replace(o,function(e){var r,o=e.replace(c,'').trim(),p=null,f=null,h=!1,m=!1,d=!0;if('fi'===o)s--;else if('end'===o)a--,u.pop();else if('if '===o.substring(0,3)){if(s++,(p=i.parseVariables(o.substring(3),u)).length)for(var g=0;g<p.length;g++){var b=p[g];i.variables[b]?i.variables[b]++:i.variables[b]=1}else p=null;h=!0,d=!0}else if('foreach '===o.substring(0,8))a++,t=o.substring(8).split(' '),u.push(t[0].trim()),-1!==(r=t[2].indexOf('.'))&&(t[2]=t[2].substring(0,r)),p=t[2].trim(),-1===u.indexOf(p)?(i.variables[p]?i.variables[p]++:i.variables[p]=1,p=[p]):p=null,m=!0;else if('else if '===o.substring(0,8)){if((p=i.parseVariables(o.substring(8),u)).length)for(g=0;g<p.length;g++){b=p[g];i.variables[b]?i.variables[b]++:i.variables[b]=1}else p=null;h=!0}else if('continue'!==o&&'break'!==o&&'else'!==o){if((p=o?o.match(l):null)&&(p=p.toString()),p&&n[p]&&(p=null),p&&-1===u.indexOf(p)?(i.variables[p]?i.variables[p]++:i.variables[p]=1,p=[p]):p=null,-1===o.indexOf('|')&&(o+=' | encode'),o=(f=o.split('|'))[0],(f=f.slice(1)).length)for(g=0;g<f.length;g++){var v=f[g].trim();v=-1===(r=v.indexOf('('))?'Thelpers.$execute(model,\''+v+'\',)':'Thelpers.$execute(model,\''+v.substring(0,r)+'\',,'+v.substring(r+1),f[g]=v}else f=null;o=i.safe(o.trim()||'model'),d=!1}return i.commands.push({index:i.commands.length,cmd:o,ifcount:s,loopcount:a,variable:p,helpers:f,isloop:m,isif:h,iscode:d}),i.split}).split(i.split);for(var p=0,h=i.builder.length;p<h;p++)i.builder[p]=i.builder[p].replace(f,'');return i.make(r)},h.prototype.parseVariables=function(e,r){for(var t=[],l=e.split(i),o=0,c=l.length;o<c;o++)for(var p=l[o].replace(u,''),f=p.match(s),h=0;h<f.length;h++)!(p=(p=f[h]).split('.')[0])||a.test(p)||n[p]||-1===t.indexOf(p)&&-1===r.indexOf(p)&&t.push(p);return t},h.prototype.safe=function(e){for(var r=e.split('.'),t=[],n=1;n<r.length;n++){var i=r.slice(0,n).join('.');t.push(i+'==null?\'\':')}return t.join('')+r.join('.')},h.prototype.make=function(e){for(var r=['var $output=$text[0];var $tmp;var $index=0;'],t=0,n=this.commands.length;t<n;t++){var i,s=this.commands[t];if(t&&r.push('$output+=$text['+t+'];'),s.iscode)if(s.isloop){var l='$i'+Math.random().toString(16).substring(3,6),a=l+'a';i=s.cmd.substring(s.cmd.lastIndexOf(' in ')+4).trim(),i=a+'='+this.safe(i)+';if(!('+a+' instanceof Array)){if('+a+'&&typeof('+a+')===\'object\')'+a+'=Tangular.toArray('+a+')}if('+a+' instanceof Array&&'+a+'.length){for(var '+l+'=0,'+l+'l='+a+'.length;'+l+'<'+l+'l;'+l+'++){$index='+l+';var '+s.cmd.split(' ')[1]+'='+a+'['+l+'];',r.push(i)}else if(s.isif)'else if '===s.cmd.substring(0,8)?r.push('}'+s.cmd.substring(0,8).trim()+'('+s.cmd.substring(8).trim()+'){'):r.push(s.cmd.substring(0,3).trim()+'('+s.cmd.substring(3).trim()+'){');else switch(s.cmd){case'else':r.push('}else{');break;case'end':r.push('}}');break;case'fi':r.push('}');break;case'break':r.push('break;');break;case'continue':r.push('continue;')}else if(s.helpers){for(var u='',o=0;o<s.helpers.length;o++){var c=s.helpers[o];u=0===o?c.replace('',s.cmd.trim()).trim():c.replace('',u.trim())}r.push(`$tmp=${u};if($tmp!=null)$output+=${e?'await ':''}$tmp;`)}else r.push('if('+s.cmd+'!=null)$output+='+s.cmd+';')}r.push((n?'$output+=$text['+n+'];':'')+'return $output;'),delete this.variables.$;var p=Object.keys(this.variables),f=['$ || {}','model'];for(t=0;t<p.length;t++)f.push('model.'+p[t]);var h='var tangular='+(e?'async ':'')+'function($,model'+(p.length?','+p.join(','):'')+'){'+r.join('')+'};return function(model,$){return tangular('+f.join(',')+');}';return new(0,Object.getPrototypeOf(e?async()=>{}:()=>{}).constructor)('$text',h)(this.builder)},t.$execute=function(e,r,n,i,s,l,a,u,o,c){return null==t[r]?(console&&console.warn('Tangular: missing helper','"'+r+'"'),n):t[r].call(e,n,i,s,l,a,u,o,c)},t.encode=function(e){return null==e?'':e.toString().replace(p,function(e){switch(e){case'&':return'&amp;';case'<':return'&lt;';case'>':return'&gt;';case'"':return'&quot;'}return e})},t.raw=function(e){return e},r.render=function(e,r,t){return null==r&&(r={}),(new h).compile(e)(r,t)},r.renderAsync=async function(e,r,t){return null==r&&(r={}),(await(new h).compile(e,!0))(r,t)},r.compile=function(e){return(new h).compile(e)},r.register=function(e,n){return t[e]=n,r}}function h(){this.commands,this.variables,this.builder,this.split='\0'}}(M),module&&module.exports&&(module.exports=M.Tangular);